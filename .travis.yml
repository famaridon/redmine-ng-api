sudo: 'required'
language: java
jdk:
  - openjdk8
services:
  - docker

addons:
  sonarcloud:
    organization: "famaridon-github" # the key of the org you chose at step #3
    token:
      secure: $SONAR_TOKEN # encrypted value of your token

cache:
  directories:
    - $HOME/.m2

before_install:
  - ./.travis/main.sh


install: # the build step
  - mvn clean install -B -V sonar:sonar

script:
  - echo "export WAIT_DOCKER=30" > .travis/test-configuration.sh
  - ./.travis/test.sh

notifications:
  email: # only receive email when the build status changes (someone broke the build!)
    on_failure: always
    on_success: change
